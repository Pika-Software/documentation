---
title: Player Model Downloader
sidebar_label: PMD
---

Добро пожаловать в документацию по PMD, здесь ты найдёшь много интересных функций, которые помогут тебе использовать загрузчик моделей.

## Возможные коды Callback
|Код |Описание |
--- |---
0 | Идёт загрузка аддона, повторное выполнение будет возможно по завершению.
1 | Допущена ошибка в id аддона, из за чего невозможно начать загрузку.
2 | При анализе аддона, в нём не было найденно ни одной модели игрока.
3 | После загрузки аддона выяснилось, что gma повреждён.
4 | При загрузке аддона сервер перестал отвечать, в следствии чего загрузка резко завершилась.
200 | Загрузка выполнена успешно, аддон пошёл все проверки. Все найденные модели игрока и руки теперь доступны для установки.

## Функции ( Client )

### HasAddon
#### Описание
* Вернёт `true`, если модель уже загружена и может быть использована или `false` если нельзя...
```jsx
PMD.HasAddon(id)
```

#### Аргументы
|Название |Тип |Описание |
--- | --- | ---
id | `string` | ID аддона из мастреской Steam, который содержит в себе gma с моделькой игрока.

#### Примеры
Скачивание и установка модели сразу же после загрузки
```lua
    if PMD.HasAddon("2456261845") then
        print("Модель есть")
    else
        print("Модели нет, скачайте её!")
    end
```

### Download
#### Описание
* Скачивает указанный id на клиент, по завершению загрузки выполняет callback.
```jsx
PMD.Download(id, callback, ply)
```

#### Аргументы
|Название |Тип |Описание |
--- | --- | ---
id | `string` | ID аддона из мастреской Steam, который содержит в себе gma с моделькой игрока.
callback | `function` | Функция которая выполнится после завершения загрузки, аргументы callback можно глянуть [**тут**](#аргументы-callback)
ply | `player` | Игрок начавший загрузку, если не указывать, то будет [**LocalPlayer()**](https://wiki.facepunch.com/gmod/Global.LocalPlayer)

#### Аргументы Callback
|Название |Тип |Описание |
--- | --- | ---
code | `int` | Код состояния, который вернёт callback будет равен коду из [**таблицы выше**](#возможные-коды-callback).
tbl | `table` | Таблица с 2 списками ( Модели(Models) и Руки(Hands) ), она не будет равена `nil` только в том случае, если вернулся код `200`.
id | `string` | ID указанный в начале загрузке.

#### Примеры
Скачивание и установка модели сразу же после загрузки
```lua
    PMD.Download("2456261845", function(code, tbl, id)
        if code == 200 then
            PMD.Install(id)
        end
    end)
```

### Install
#### Описание
* Устанавливает модель игрока из указанного `id` аддона, под номером `num`

```jsx
PMD.Install(id, num)
```

#### Аргументы
|Название |Тип |Описание |
--- | --- | ---
id | `string` | ID аддона из мастреской Steam, который содержит в себе gma с моделькой игрока.
num | `int` | Номер модели в таблице Models. Если равен `nil`, то установится первая модель.

#### Примеры
Установка первой модели игрока из аддона
```lua
PMD.Install("2456261845")
```

### Remove
#### Описание
* Возвращает модель игрока к первоначальной

```jsx
PMD.Remove()
```

### InstallHands
#### Описание
* Устанавливает модель рук из указанного `id` аддона, под номером `num`

```jsx
PMD.InstallHands(id, num)
```

#### Аргументы
|Название |Тип |Описание |
--- | --- | ---
id | `string` | ID аддона из мастреской Steam, который содержит в себе gma с моделькой игрока.
num | `int` | Номер модели в таблице Hands. Если равен `nil`, то установится первая модель.

#### Примеры
Установка первой модели рук из аддона
```lua
PMD.InstallHands("2456261845")
```

### RemoveHands
#### Описание
* Возвращает модель рук к первоначальной

```jsx
PMD.RemoveHands()
```

### SetAutoInstallModel
#### Описание
* Устанавливает указанную модель как модель `по умолчанию`. Т.е. ту модель которая автоматически устанавливается после захода на сервер.

```jsx
PMD.SetAutoInstallModel(id)
```

#### Аргументы
|Название |Тип |Описание |
--- | --- | ---
id | `string` | ID аддона из мастреской Steam, который содержит в себе gma с моделькой игрока.

#### Примеры
Установка модели `2456261845` как модели по умолчанию для игрока. 
```lua
PMD.SetAutoInstallModel("2456261845")
```

### ResetModel
#### Описание
* Устанавливает модель игрока узказанную как модель `по умолчанию`.

```jsx
PMD.ResetModel()
```

### GetModel
#### Описание
* Вернёт таблицу `table` с `name` и `model`, где `name` - название модели, а `model` - путь до модели

```jsx
PMD.GetModel(id, num)
```

#### Аргументы
|Название |Тип |Описание |
--- | --- | ---
id | `string` | ID аддона из мастреской Steam, который содержит в себе gma с моделькой игрока.
num | `int` | Номер модели в таблице Hands. Если равен `nil`, то установится первая модель.

#### Примеры
Вывод названия модели
```lua
    local tbl = PMD.GetModel("2456261845")
    if tbl then
        print(tbl.name)
    end
```

Вывод пути до модели
```lua
    local tbl = PMD.GetModel("2456261845")
    if tbl then
        print(tbl.model)
    end
```

### GetHands
#### Описание
* Вернёт таблицу `table` содержащюю всю информацию о руках но этим `id`

```jsx
PMD.GetHands(id, num)
```

#### Аргументы
|Название |Тип |Описание |
--- | --- | ---
id | `string` | ID аддона из мастреской Steam, который содержит в себе gma с моделькой игрока.
num | `int` | Номер модели в таблице Hands. Если равен `nil`, то установится первая модель.

#### Примеры
Вывод названия модели
```lua
    local tbl = PMD.GetHands("2456261845")
    if tbl then
        PrintTable(tbl)
    end
```

#### Результат
```lua
bodygroups	=	00000000
model	=	models/prikolmen/mothica_carms.mdl
name	=	mothica_pm
skin	=	0
```

## Функции ( Shared )

### HasPMD
#### Описание
* Возвращает `bool`, `true` если игрок использует pmd и `false` если нет.

```jsx
PLAYER:HasPMD()
```


#### Примеры
Проверка использует ли локальный игрок кастомную модельку, выведет в консоль.
```lua
local ply = LocalPlayer()
if ply:HasPMD() then
    print("Игрок использует pmd")
else
    print("Игрок не использует pmd")
end
```